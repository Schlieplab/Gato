<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns:ev="http://www.w3.org/2001/xml-events" version="1.1" baseProfile="full"
viewbox="0 0 1024 768" width="30cm" height="30cm"
onload="Initialize(evt)">
<defs>     
    <linearGradient id="slider_bar_lg" x1="0" y1="0" x2="0" y2="1">
		<stop offset="0" stop-color="skyblue" >
		</stop>
		<stop offset="1" stop-color="black">
		</stop>
    </linearGradient>
    
    <linearGradient id="slider_thumb_lg" x1="0" y1="0" x2="0" y2="1">
		<stop offset="0" stop-color="#C0C0C0">
		</stop>
		<stop offset="1" stop-color="black">
		</stop>
    </linearGradient>
</defs>
<script type="text/ecmascript"><![CDATA[
var step = 0;
var v_ano_id = "va"; //ID prefix for vertex annotation
var e_arrow_id = "ea"; //ID prefix for edge arrow
var svgNS="http://www.w3.org/2000/svg";
var the_evt_target;
var the_target;
var the_evt_target_ownerDocument;
var element;
var blinkcolor;
var blinkcount;
var e_blinkcolor;
var e_blinkcount;
var code;    //HTB of code in a vertical layout
var init_graphs;  //initial graphs used for restarting animation
var action_panel;   //ButtonPanel object for start, step, continue, and stop buttons
var state;	//tracks animation state ("running", "stopped", "stepping")
var timer;	//timer for AnimateLoop
var timeout = 1000;  //Multiplicative factor for timeout
var horiz_layout;  //horizontal LLC for visible elements
var vert_layout;   //vertical LLC for visible elements
var speed_slider;  //Manages speed settings of animation
var current_line = 0;  //Currently 'executing' line of code in program.  While running, in range [1, infinity).  0 otherwise.
var default_vertex_radius = 14.0; //Default vertex radius
var default_line_width = 4.0; //Default line width
var x_offset = 20;  //Distance the layout is translated horizontally, in pixels
var y_offset = 20;  //Distance layout is translated vertically, in pixels
var translate_buffer = []; //Gloval buffer for translating graphs.
var blinking = false; //True iff blinking animation is commencing.  Prevents premature stepping
var step_pressed = false;  //Whether the step button was pressed.  Used to emulate an interrupt.
var step_evt;
var continue_pressed = false;
var continue_evt;
/**
*
*
*
* Helper functions
*
*
**/
//Accepts a string of the form "...translate(x y)..." and returns x and y in a 2-index array
function getTranslate(str){
	var x;
	var y;
	
	if(str == null || str.indexOf("translate") == -1){
		return new Array(0, 0);
	}
	
	var to_parse = str.slice(str.indexOf("translate") + "translate".length);
	
	if(to_parse == null){
		return new Array(0, 0);
	}
	
	
	var r = to_parse.match(/[^,\(\)\sA-Za-z]+/g);;
	
	if(r[0] != null){
		x = parseFloat(r[0]);
	}
	
	if(r[1] != null){
		y = parseFloat(r[1]);
	}
	
	if(r[1] == null || (to_parse.indexOf(")") < to_parse.indexOf(r[1]))){
		return new Array(x, 0);
	}
	
	return new Array(x, y);

}

//Sets the first instance of "translate" in components "transform" attribute to "translate(x y)"
//Creates one if none exists.
function setTranslate(component, x, y){
	var transformation = component.getAttribute("transform");
	
	if(transformation != null){
		if(transformation.indexOf("translate") == -1){
			component.setAttribute("transform", transformation + " translate(" + x + " " + y + ")");
		}else{
                        var header = transformation.substring(0, transformation.indexOf("translate") + "translate".length);
			var trailer = transformation.slice(transformation.indexOf("translate") + "translate".length);
			trailer = trailer.slice(trailer.indexOf(")"));
		
			var newattr = header + "(" + x + " " + y + trailer;

			component.setAttribute("transform", newattr);
		}

	}else{
		component.setAttribute("transform", "translate(" + x + " " + y + ")");
	}
}

//Accepts a string of the form "...scale(x y)..." and returns x and y in a 2-index array
function getScale(str){
	var x;
	var y;
	
	if(str == null || str.indexOf("scale") == -1){
		return new Array(1, 1);
	}
	
	var to_parse = str.slice(str.indexOf("scale") + "scale".length);
	
	if(to_parse == null){
		return new Array(1, 1);
	}
	
	
	var r = to_parse.match(/[^,\(\)\sA-Za-z]+/g);;
	
	if(r[0] != null){
		x = parseFloat(r[0]);
	}
	
	if(r[1] != null){
		y = x;
	}
	
	if(r[1] == null || (to_parse.indexOf(")") < to_parse.indexOf(r[1]))){
		return new Array(x, x);
	}
	
	return new Array(x, y);

}

//Sets the first instance of "scale" in components "transform" attribute to "scale(x y)"
//Creates one if none exists
function setScale(component, x, y){
	var transformation = component.getAttribute("transform");
	
	if(transformation != null){
		if(transformation.indexOf("scale") == -1){
			component.setAttribute("transform", transformation + " scale(" + x + " " + y + ")");
		}else{
                        var header = transformation.substring(0, transformation.indexOf("scale") + "scale".length);
			var trailer = transformation.slice(transformation.indexOf("scale") + "scale".length);
			trailer = trailer.slice(trailer.indexOf(")"));
		
			var newattr = header + "(" + x + " " + y + trailer;

			component.setAttribute("transform", newattr);
		}

	}else{
		component.setAttribute("transform", "scale(" + x + " " + y + ")");
	}
}


//Return a 2-index array [v1,v2] which has an angle of
//90 degrees clockwise to the vector (dx,dy)
function Orthogonal(dx, dy){

	var u1 = dx;
	var u2 = dy;
	
	var length = Math.sqrt(Math.pow(u1,2) + Math.pow(u2,2));
	
	if(length < 0.001){
		length = 0.001;
	}
	
	u1 /= length;
	u2 /= length;
	return [-1*u2, u1];
}

//Creates an arrowhead on a line starting at (vx,vy) and ending at (wx,wy) and parallel to it
//Arrowhead with given id touches the outide of a vertex with cx=wx and xy=wy
function createArrowhead(vx, vy, wx, wy, stroke_width, id){

 		var l = Math.sqrt(Math.pow(parseFloat(wx)-parseFloat(vx),2) + Math.pow(parseFloat(wy)-parseFloat(vy), 2));
		
		
                if (l < .001)
                    l = .001;
		    	
		var a_width = (1 + 1.5/(1*Math.pow(Math.log(parseFloat(stroke_width))/Math.log(10), 6)));

                if(a_width > 5.0)
                    a_width = 5.0;
		    
		var cr = default_vertex_radius;
		
                a_width = a_width * parseFloat(stroke_width);

                var p1 = [0,0];
                var p2 = [0, a_width];
                var p3 = [cr, a_width/2];
                var angle = (Math.atan2(parseInt(wy)-parseInt(vy), parseInt(wx)-parseInt(vx))) * 180/Math.PI;
                var c = (l-2*default_vertex_radius)/l;
                var tmpX = parseFloat(vx) + c*(parseFloat(wx) - parseFloat(vx));
                var tmpY = parseFloat(vy) + c*(parseFloat(wy) - parseFloat(vy));
		
		var arrowhead = the_evt_target_ownerDocument.createElementNS(svgNS, "polyline");
		arrowhead.setAttribute("points", p1[0] + " " + p1[1] + " " + p2[0] + " " + p2[1] + " " + p3[0] + " " + p3[1]);
		arrowhead.setAttribute("fill", "#EEEEEE");
		arrowhead.setAttribute("transform", "translate(" + tmpX + " " + (tmpY-a_width/2) + ") rotate(" + angle + " " + p1[0] + " " + a_width/2 + ")");
		arrowhead.setAttribute("id", id);

                return arrowhead;
}




/**
*
*
*
* Classes for visible components
*
*
*/
//Highlightable block of text
//Parameters: horizontal and vertical padding between lines, id, font size of text, and layout mode (horizontal or vertical)
function HighlightableTextBlock(hp, vp, id, font_size, layout){
	this.line_llc = new LinearLayoutComponent(hp, vp, id, layout);
	this.line_llc.group.setAttribute("font-size", font_size);
	this.highlight_group = the_evt_target_ownerDocument.createElementNS(svgNS,"g");
	this.highlight_group.setAttribute("id", id + "_hg");
	the_evt_target_ownerDocument.documentElement.insertBefore(this.highlight_group, this.line_llc.group);	
}

//Initializes prototype, to call object.function
function HTB_prototypeInit(){
	var htb = new HighlightableTextBlock(2,2,"foo",14, "vertical");
	HighlightableTextBlock.prototype.insertLine = HTB_insertLine;
	HighlightableTextBlock.prototype.deleteLine = HTB_deleteLine;
	HighlightableTextBlock.prototype.highlightLine = HTB_highlightLine;
	HighlightableTextBlock.prototype.removeHighlight = HTB_removeHighlight;

	htb = the_evt_target_ownerDocument.getElementById("foo");
	htb.parentNode.removeChild(htb);
	htb = the_evt_target_ownerDocument.getElementById("foo_hg");
	htb.parentNode.removeChild(htb);
}

//Insert line with respective into nth slot.  0-based indexing.  If line already exists in HTB, line is shifted to respective spot.
function HTB_insertLine(id, n){
	var to_insert = the_evt_target_ownerDocument.getElementById(id);
	if(to_insert != null && to_insert.getAttribute("blank") != null && to_insert.getAttribute("blank") == "true"){ // Empty Text  Replace with Rectangle
		var new_rect = the_evt_target_ownerDocument.createElementNS(svgNS, "rect");
		var children = this.line_llc.group.childNodes;
		for(i = 0; i < children.length; i++){
			if(children.item(i).getAttribute("blank") == "false"){
				new_rect.setAttribute("x", children.item(i).getAttribute("x"));
				new_rect.setAttribute("y", children.item(i).getAttribute("y"));
				new_rect.setAttribute("height", children.item(i).getBBox().height);
				new_rect.setAttribute("width", this.line_llc.group.getBBox().width);
				to_insert.parentNode.removeChild(to_insert);
				new_rect.setAttribute("id", to_insert.getAttribute("id"));
				new_rect.setAttribute("fill", "white");
				new_rect.setAttribute("fill-opacity", 0);
				the_evt_target_ownerDocument.documentElement.appendChild(new_rect);
				break;
			}
		}
	}
	this.line_llc.insertComponent(id, n);
}

//Deletes nth line, using 0-based indexing
function HTB_deleteLine(n){
	this.line_llc.deleteComponent(n);
	this.removeHighlight(this.line_llc.group.childNodes.length);
}



//highlight nth line, using 0-based indexing
function HTB_highlightLine(n){
	if(n < this.line_llc.group.childNodes.length && n >= 0){
		if(the_evt_target_ownerDocument.getElementById(this.line_llc.group.getAttribute("id") + "_hl" + (n+1)) == null){
			var line = this.line_llc.group.childNodes.item(n);
			var htb_bbox = this.line_llc.group.getBBox();
			var line_bbox = line.getBBox();
			var line_translation = getTranslate(this.line_llc.group.childNodes.item(n).getAttribute("transform"));

			
			var dx = line.getAttribute("dx");
			var dy = line.getAttribute("dy");
			if(dx == null){
				dx = 0;
			}else{
				dx = parseFloat(dx);
			}
			if(dy == null){
				dy = 0;
			}else{
				dy = parseFloat(dy);
			}

			var background = the_evt_target_ownerDocument.createElementNS(svgNS, "rect");
			background.setAttribute("x", line_bbox.x + line_translation[0] - this.line_llc.h_padding - dx);
			background.setAttribute("y", line_bbox.y + line_translation[1] - this.line_llc.v_padding - dy);
			background.setAttribute("width", htb_bbox.width + 2*this.line_llc.h_padding);
			background.setAttribute("height", line_bbox.height + 2*this.line_llc.v_padding);
			background.setAttribute("stroke", "blue");
			background.setAttribute("fill", "yellow");
			background.setAttribute("id", this.line_llc.group.getAttribute("id") + "_hl" + (n+1));
			
			this.highlight_group.appendChild(background);
		}
	}
}

//Removes the highlight of the nth line, using 0-based indexing.
function HTB_removeHighlight(n){
	var hl = the_evt_target_ownerDocument.getElementById(this.line_llc.group.getAttribute("id") + "_hl" + (n+1));
	if(hl != null){
		hl.parentNode.removeChild(hl);
	}
}


//Layout for components
//Lays out components linearly either 'horizontal' or 'vertical' as specified by layout
//With hp pixels of horizontal padding and vp pixels of vertical padding
function LinearLayoutComponent(hp, vp, id, layout){
	this.h_padding = hp;  //Number of pixels padding the top and bottom of each line
	this.v_padding = vp;  //Number of pixels padding the left and right of each line
	this.id = id;           //ID of group that is abstracted by this HTB instance
	
	//Create new group element to place all lines of code
	this.group = the_evt_target_ownerDocument.createElementNS(svgNS,"g");
	this.group.setAttribute("id", id);
	the_evt_target_ownerDocument.documentElement.appendChild(this.group);
	this.layout = layout;  //'horizontal' or 'vertical'
}

//Initializes prototype to call methods of the form object.function
function LLC_prototypeInit(){
	var llc = new LinearLayoutComponent(0,0,"foo","horizontal");
	LinearLayoutComponent.prototype.insertComponent = LLC_insertComponent;
	LinearLayoutComponent.prototype.deleteComponent = LLC_deleteComponent;
	LinearLayoutComponent.prototype.resnapComponent = LLC_resnapComponent;
	llc.group.parentNode.removeChild(llc.group);
}



//Insert element of specified id into nth slot, using 0-based indexing.
//If element is already in LLC, element is moved to nth slot
function LLC_insertComponent(id, n){
	var new_c = the_evt_target_ownerDocument.getElementById(id);
	var padding = 0;
	if(this.layout == "horizontal"){
		padding = this.h_padding;
	}else{
		padding = this.v_padding;
	}
	var bbox = null;
	var translation = null;
	var shift = 0;
	
	if(new_c != null){   //Component exists
		if((new_c.parentNode != this.group) && (n <= this.group.childNodes.length) && (n >=0)){ //Component is not in group.  Insert and shift if necessary
		
			if(n == 0){
				setTranslate(new_c, 0, 0);
			}else{
				bbox = this.group.childNodes.item(n-1).getBBox();
				translation = getTranslate(this.group.childNodes.item(n-1).getAttribute("transform"));
				
				if(this.layout == "horizontal"){
					shift = translation[0] + bbox.width + 2*padding;
					setTranslate(new_c, shift, 0);

				}else{		
					shift = translation[1] + bbox.height + 2*padding;
					setTranslate(new_c, 0, shift);
				}
			}
			
			if(n == this.group.childNodes.length){
				this.group.appendChild(new_c);
			}else{	
				var children = this.group.childNodes;
				this.group.insertBefore(new_c, children.item(n));
				for(i = n+1; i < children.length; i++){
					bbox = children.item(i-1).getBBox();
					translation = getTranslate(children.item(i-1).getAttribute("transform"));
					if(this.layout == "horizontal"){
						shift = translation[0] + bbox.width + 2*padding;
						setTranslate(children.item(i), shift, 0);
					}else{		
						shift = translation[1] + bbox.height + 2*padding;
						setTranslate(children.item(i), 0, shift);
					}
					
				}
			}
		}else if(n <= this.group.childNodes.length && (n >= 0)){ //Component is in group.  Move it and shift necessary lines
			var children = this.group.childNodes;
			var old_index = 0;
			for(; old_index < children.length; old_index++){
				if(children.item(old_index) === new_c){
					break;
				}
			}
			if(old_index > n){
				this.group.insertBefore(new_c, children.item(n));
				
				for(i = n; i <= old_index; i++){
					if(i == 0){
						setTranslate(children.item(i), 0, 0);
					}else{
						bbox = children.item(i-1).getBBox();	
						translation = getTranslate(children.item(i-1).getAttribute("transform"));
						if(this.layout == "horizontal"){
							shift = translation[0] + bbox.width + 2*padding;
							setTranslate(children.item(i), shift, 0);
						}else{		
							shift = translation[1] + bbox.height + 2*padding;
							setTranslate(children.item(i), 0, shift);
						}
					}
				}
			}else if(old_index < n){
				if(n == children.length){
					this.group.appendChild(new_c);
				}else{	
					this.group.insertBefore(new_c, children.item(n+1));
				}
				for(i = old_index; i <= n; i++){			
					if(i == 0){
						setTranslate(children.item(i), 0, 0);

					}else{
						bbox = children.item(i-1).getBBox();
						translation = getTranslate(children.item(i-1).getAttribute("transform"));
						if(this.layout == "horizontal"){
							shift = translation[0] + bbox.width + 2*padding;
							setTranslate(children.item(i), shift, 0);
						}else{		
							shift = translation[1] + bbox.height + 2*padding;
							setTranslate(children.item(i), 0, shift);
						}
					}
				}
			}
		}
	}
}


//Refits the nth element, to fit according to specs
function LLC_resnapComponent(n){
	var children = this.group.childNodes;
	var child = children.item(n);
	child.parentNode.removeChild(child);
	
	the_evt_target_ownerDocument.documentElement.appendChild(child);
	this.insertComponent(child.getAttribute("id"), n);
}

//Deletes the nth element, using 0-based indexing, and refits components if necessary
function LLC_deleteComponent(n){
	var padding = 0;
	var children = this.group.childNodes;
	var bbox = null;
	var translation = null;
	var shift = 0;
	
	if(this.layout == "horizontal"){
		padding = this.h_padding;
	}else{
		padding = this.v_padding;
	}
	
	if(this.group.childNodes.length == 0){
		return;
	}	

	var removed_element = this.group.removeChild(this.group.childNodes.item(n));
	
	for(i = n; i < children.length; i++){

		if(i == 0){

			setTranslate(children.item(i), 0, 0);


		}else{
			bbox = children.item(i-1).getBBox();


			translation = getTranslate(children.item(i-1).getAttribute("transform"));

			if(this.layout == "horizontal"){
				shift = translation[0] + bbox.width + 2*padding;
				setTranslate(children.item(i), shift, 0);
			}else{		
				shift = translation[1] + bbox.height + 2*padding;

				setTranslate(children.item(i), 0, shift);
			}
		}
	}
}




//Button Panel
//Buttons are padded by hp and vp pixels.
//Button panel's id given by id, and layout of buttons is given by layout
function ButtonPanel(hp, vp, id, layout){
	this.llc = new LinearLayoutComponent(hp, vp, id, layout);
}

//Initializes prototype for button panel
function BP_prototypeInit(){
	var bp = new ButtonPanel(0,0,"baz","horizontal");
	ButtonPanel.prototype.createButton = BP_createButton;
	ButtonPanel.prototype.deleteButton = BP_deleteButton;
	ButtonPanel.prototype.deleteButtonById = BP_deleteButtonById;
	ButtonPanel.prototype.activateButton = BP_activateButton;
	ButtonPanel.prototype.deactivateButton = BP_deactivateButton;
	bp.llc.group.parentNode.removeChild(bp.llc.group);
}

//Creates a button
//Parameters:  button id, shape (path), color, index in button panel, button action
//Inserts button into specified and assigns specifieds action
function BP_createButton(id, draw_path, color, index, action){  //Create button with corresponding id, text, and action into slot #index
	if(the_evt_target_ownerDocument.getElementById(id) == null){
		var button_group = the_evt_target_ownerDocument.createElementNS(svgNS, "path");
		button_group.setAttribute("id", id);
		button_group.setAttribute("d", draw_path);
		button_group.setAttribute("fill", color);
		button_group.setAttribute("cursor", "pointer");
		button_group.setAttribute("onclick", action);
                button_group.setAttribute("fill-opacity", 1);
		the_evt_target_ownerDocument.documentElement.appendChild(button_group);
		this.llc.insertComponent(button_group.getAttribute("id"), index);
	}else{
		this.llc.insertComponent(id, index);
	}
}

//Deletes the nth button from panel (0-based indexing)
function BP_deleteButton(n){
	this.llc.deleteComponent(n);
}

//Deletes button of given id from the panel
function BP_deleteButtonById(id){
	var children = this.llc.group.childNodes;
	
	for(i = 0; i < children.length; i++){
		if(children.item(i).getAttribute("id") == id){
			this.deleteButton(i);
			break;
		}
	}
}

//Activates button with corresponding id and assigns a specified action
function BP_activateButton(id, action){
	var children = this.llc.group.childNodes;
	for(i = 0; i < children.length; i++){
		if(children.item(i).getAttribute("id") == id){
			children.item(i).setAttribute("onclick", action);
			children.item(i).setAttribute("cursor", "pointer");
			children.item(i).setAttribute("fill-opacity", 1);
			break;
		}
	}
}

//Deactivates button with corresponding id
function BP_deactivateButton(id){
	var children = this.llc.group.childNodes;

	for(i = 0; i < children.length; i++){
		if(children.item(i).getAttribute("id") == id){
			children.item(i).setAttribute("onclick", "");
			children.item(i).setAttribute("cursor", "default");
			children.item(i).setAttribute("fill-opacity", "0.5");
			break;
		}
	}
}


/**
*
*
*
* Slider
*
*
*/
//Creates a simple slider
//Parameters: slider id, height of slider thumb, x-offset from edge of canvas (pixels), 2-index array, specifying the upper and lower bounds of the slider,
//start value of slider, array of strings specifying  labels distributed along slider
//title of slider, and an array of 2-index arrays of ['attribute', 'action'] pairs
function Slider(id, slider_width, thumb_height, offset, range, start_value, labels, title, actions){	
	this.slider = null;
	this.slider_bar = null;
	this.slider_thumb = null;
	this.low_bound = range[0];
	this.up_bound = range[1];
	this.thumb_active = false;
	this.current_setting = range[0];
	this.offset = offset;
	
	this.default_thickness = 10;
	var font_size = 10;
	
	this.slider = the_evt_target_ownerDocument.createElementNS(svgNS, "g");	
	this.slider.setAttribute("id", id);
	
	this.slider_bar = the_evt_target_ownerDocument.createElementNS(svgNS, "rect");
	this.slider_bar.setAttribute("width", slider_width);
	this.slider_bar.setAttribute("height", this.default_thickness);
	this.slider_bar.setAttribute("x", this.default_thickness/2);
	this.slider_bar.setAttribute("y",(thumb_height-this.default_thickness)/2);
	this.slider_bar.setAttribute("rx", this.default_thickness/2);
	this.slider_bar.setAttribute("ry", this.default_thickness/2);
	this.slider_bar.setAttribute("stroke", "black");
	this.slider_bar.setAttribute("fill", "url(#slider_bar_lg)");
	this.slider_bar.setAttribute("stroke-width", 1);
	this.slider_bar.setAttribute("cursor", "pointer");
	this.slider_bar.setAttribute("id", id + "_slider_bar");
	this.slider.appendChild(this.slider_bar);
	
	this.slider_thumb = the_evt_target_ownerDocument.createElementNS(svgNS, "rect");
	this.slider_thumb = the_evt_target_ownerDocument.createElementNS(svgNS, "rect");
	this.slider_thumb.setAttribute("width", this.default_thickness);
	this.slider_thumb.setAttribute("height", thumb_height);
	this.slider_thumb.setAttribute("rx", this.default_thickness/2);
	this.slider_thumb.setAttribute("ry", this.default_thickness/2);
	this.slider_thumb.setAttribute("stroke", "black");
	this.slider_thumb.setAttribute("fill", "url(#slider_thumb_lg)");
	this.slider_thumb.setAttribute("stroke-width", 1);
	this.slider_thumb.setAttribute("cursor", "pointer");
	this.slider_thumb.setAttribute("id", id + "_slider_thumb");
	this.slider.appendChild(this.slider_thumb);
	
	//create labels below slider
	for(i in labels){
		var text = the_evt_target_ownerDocument.createElementNS(svgNS, "text");
		text.setAttribute("x", this.default_thickness/2 + i*(slider_width/(labels.length-1)));
		text.setAttribute("y", thumb_height+ font_size);
		text.setAttribute("text-anchor","middle");
		text.setAttribute("font-size", font_size);
		text.setAttribute("font-family","Helvetica");
		text.setAttribute("font-style","normal");
		text.appendChild(the_evt_target_ownerDocument.createTextNode(labels[i]));
		this.slider.appendChild(text);
	}
	
	//create slider title
	
	var header = the_evt_target_ownerDocument.createElementNS(svgNS, "text");
	header.setAttribute("x", (this.default_thickness + slider_width)/2);
	header.setAttribute("y", 0);
	header.setAttribute("text-anchor","middle");
	header.setAttribute("font-size", font_size);
	header.setAttribute("font-family","Helvetica");
	header.setAttribute("font-style","normal");
	header.appendChild(the_evt_target_ownerDocument.createTextNode(title));
	this.slider.appendChild(header);
		
	for(i in actions){
		this.slider.setAttribute(actions[i][0], actions[i][1]);
	}
	
	the_evt_target_ownerDocument.documentElement.appendChild(this.slider);
}

/**
*
*
* Speed Slider functions
*
*
*/
//Drags or moves thumb when slider is clicked
function Click_SSlider(evt){
	if(evt.target.getAttribute("id") == "speed_slider_slider_thumb"){  //Drag thumb
		speed_slider.thumb_active = true;
	} else if(evt.target.getAttribute("id") == "speed_slider_slider_bar"){	//Move thumb.
		Move_SSlider(evt);
	}
}

//Stops thumb movement
function Deactivate_SSlider(evt){
	speed_slider.thumb_active=false;
}

//Moves thumb and changes associated values
function Move_SSlider(evt){
	var bbox = speed_slider.slider_bar.getBBox();
	var x_pos = evt.clientX;
	if(evt.clientX == undefined)
		x_pos = evt.touches[0].clientX;
		
	speed_slider.slider_thumb.setAttribute("x", x_pos-speed_slider.offset-(speed_slider.default_thickness/2));

	speed_slider.current_setting = speed_slider.low_bound + (speed_slider.up_bound-speed_slider.low_bound)*(speed_slider.slider_thumb.getAttribute("x")/speed_slider.slider_bar.getAttribute("width"));
	timeout = Math.log(speed_slider.current_setting) * Math.log(speed_slider.current_setting);
}

//Drag slider and change associated values
function Drag_SSlider(evt){
	if(speed_slider.thumb_active){
		var x_pos = evt.clientX;
		
		if(x_pos==undefined){
			x_pos = evt.touches[0].clientX;
		}
		if(x_pos >= speed_slider.slider_bar.getBBox().x+speed_slider.offset && x_pos <= (speed_slider.slider_bar.getBBox().x + speed_slider.offset + speed_slider.slider_bar.getBBox().width)){
			speed_slider.slider_thumb.setAttribute("x", x_pos-speed_slider.offset-(speed_slider.default_thickness/2));
			speed_slider.current_setting = speed_slider.low_bound + (speed_slider.up_bound-speed_slider.low_bound)*(speed_slider.slider_thumb.getAttribute("x")/speed_slider.slider_bar.getAttribute("width"));
			timeout = Math.log(speed_slider.current_setting) * Math.log(speed_slider.current_setting);
		}
	}
}


/**
*
*
*
* Animation control functions
*
*
*/
//Starts animation loop.  If called more than once, resets display and begins loop
function StartAnimation(evt){
	if(evt.target.getAttribute("id") == "start_button"){
		if(state != null){ //Graph must be refreshed
			horiz_layout.deleteComponent(1);
			vert_layout[1] = new LinearLayoutComponent(2, 2, "vert_layout_1", "vertical");

			for(x in init_graphs){
                            var new_graph = init_graphs[x].cloneNode(true);
                            the_evt_target_ownerDocument.documentElement.appendChild(new_graph);
                            vert_layout[1].insertComponent(new_graph.getAttribute("id"), x);
                        }
			horiz_layout.insertComponent(vert_layout[1].group.getAttribute("id"), 1);

			for(x in init_graphs){
				var graph = the_evt_target_ownerDocument.getElementById(init_graphs[x].getAttribute("id"));
				var background = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id") + "_bg");
				background.setAttribute("width",graph.getBBox().width);
				background.setAttribute("height",graph.getBBox().height);
				background.setAttribute("x", graph.getBBox().x);
				background.setAttribute("y", graph.getBBox().y);
				background.setAttribute("transform", "");
	    			var translation1 = getTranslate(vert_layout[1].group.getAttribute("transform"));
				var translation2 = getTranslate(horiz_layout.group.getAttribute("transform"));
				var translation3 = getTranslate(graph.getAttribute("transform"));
				setTranslate(background, translation1[0] + translation2[0] + translation3[0], translation1[1] + translation2[1] + translation3[1]);
			}
		}
	
		state = "running";
		action_panel.activateButton("stop_button", "StopAnimation(evt)");
		action_panel.activateButton("continue_button", "ContinueAnimation(evt)");
		action_panel.activateButton("step_button", "StepAnimation(evt)");
		action_panel.deactivateButton("start_button");

		//Begin animation loop
		AnimateLoop();
	}
}

//Loop of animation.  Performs actions in animation array at specified intervals
function AnimateLoop(){
	
	//Without this block, edges/vertices may be black
	//on the fastest speed.  Comment this out to verify
	if(blinking){
		setTimeout(AnimateLoop, 1);
		return;
	}
	
	
	//Do next command
	//Special case for SetAllVertices Color
	if(animation[step][1] == SetAllVerticesColor && animation[step].length > 3){
		var vertexArray = new Array();
		for(i = 3; i < animation[step].length; i++){
			vertexArray[i-3] = animation[step][i];
		}
		animation[step][1](animation[step][2],vertexArray);
	}else{
		animation[step][1](animation[step][2],animation[step][3],animation[step][4]);
	}		
	step = step + 1;
	
	//Realign components
	the_evt_target_ownerDocument.documentElement.setAttribute("width", 2*x_offset + horiz_layout.group.getBBox().x + horiz_layout.group.getBBox().width);
	the_evt_target_ownerDocument.documentElement.setAttribute("height", 2*y_offset + horiz_layout.group.getBBox().y + horiz_layout.group.getBBox().height);
	
	//Check if steps remain
	if(step < animation.length) { //If steps remain
		
		if(animation[step-1][1] == ShowActive && ( the_evt_target_ownerDocument.getElementById(code.line_llc.group.getAttribute("id") + "_bp" + animation[step-1][2].split("_")[1]) != null 
				|| step_pressed) ){ //If the line was a show_active and the line is a breakpoint or the step button was pressed, wait
				
				
				state = "waiting";
				//If waiting because step pressed, then step animation
				if(step_pressed){
					step_pressed = false;
					StepAnimation(step_evt);
				}else{
					step_pressed = false;
				}
		}else{
			//Otherwise, execute the next command
			var duration = animation[step][0] * timeout;
			timer = setTimeout(AnimateLoop, duration);
		}
		
	}else{  //If no steps left, stop
		
                state = "stopped";
		action_panel.activateButton("start_button", "StartAnimation(evt)");
		action_panel.deactivateButton("continue_button");
		action_panel.deactivateButton("stop_button");
		action_panel.deactivateButton("step_button");
		step = 0;
		code.removeHighlight(current_line-1);
                current_line = 0;
	}
	

}

//Resumes execution of animation loop if paused by pressing step button
function ContinueAnimation(evt){
	if(evt.target.getAttribute("id") == "continue_button"){
		if(state == "waiting"){
			state = "running";
			continue_pressed = false;
			AnimateLoop();
		}else{
			continue_pressed = true;
			continue_evt = evt;
		}
	}
}

//Stops execution of animation loop and plays next animation on press of step button
function StepAnimation(evt){
        if(state == "running"){
        	step_evt = evt;
		step_pressed = true;
		return;
	}

	
	if(evt.target.getAttribute("id") == "step_button" || evt.target.getAttribute("id") == "start_button"){ //see StartAnimation to see why start button is here                
                if(blinking){
                	if(state == "stepping"){
                		setTimeout(StepAnimation,1, evt);
                	}
            			return; //prevent buggy behavior
            	}
		state = "stepping";

		
		if(animation[step][1] != ShowActive && step < animation.length){
			if(animation[step][1] == SetAllVerticesColor && animation[step].length > 3){
				var vertexArray = new Array();
				for(i = 3; i < animation[step].length; i++){
					vertexArray[i-3] = animation[step][i];
				}
				animation[step][1](animation[step][2],vertexArray);
			}else{
				animation[step][1](animation[step][2],animation[step][3],animation[step][4]);
			}		
			step = step + 1;
			
			if(blinking){
                		setTimeout(StepAnimation,1, evt);
				return;
			}
			the_evt_target_ownerDocument.documentElement.setAttribute("width", 2*x_offset + horiz_layout.group.getBBox().x + horiz_layout.group.getBBox().width);
			the_evt_target_ownerDocument.documentElement.setAttribute("height", 2*y_offset + horiz_layout.group.getBBox().y + horiz_layout.group.getBBox().height);
			setTimeout(StepAnimation,1,evt);
			return;
		}
		
		
		if(step < animation.length){
			if(animation[step][1] == SetAllVerticesColor && animation[step].length > 3){
				var vertexArray = new Array();
				for(i = 3; i < animation[step].length; i++){
					vertexArray[i-3] = animation[step][i];
				}
					animation[step][1](animation[step][2],vertexArray);
			}else{
				animation[step][1](animation[step][2],animation[step][3],animation[step][4]);
			}
			step = step + 1;
			the_evt_target_ownerDocument.documentElement.setAttribute("width", 2*x_offset + horiz_layout.group.getBBox().x + horiz_layout.group.getBBox().width);
			the_evt_target_ownerDocument.documentElement.setAttribute("height", 2*y_offset + horiz_layout.group.getBBox().y + horiz_layout.group.getBBox().height);
			state = "waiting";
			if(continue_pressed){
				continue_pressed = false;
				ContinueAnimation(continue_evt);
			}
		}else{
                    state = "stopped";
                    action_panel.activateButton("start_button", "StartAnimation(evt)");
                    action_panel.deactivateButton("continue_button");
                    action_panel.deactivateButton("stop_button");
                    action_panel.deactivateButton("step_button");
                    step = 0;
                    code.removeHighlight(current_line-1);
                    current_line = 0;
                }
	}
}

//Stops animation and clears code highlights.  To resume animation, it must be restarted
function StopAnimation(evt){
	if(evt.target.getAttribute("id") == "stop_button"){
		clearTimeout(timer);
		state = "stopped";
		action_panel.activateButton("start_button", "StartAnimation(evt)");
		action_panel.deactivateButton("continue_button");
		action_panel.deactivateButton("stop_button");
		action_panel.deactivateButton("step_button");
		step = 0;
		code.removeHighlight(current_line-1);
                current_line = 0;
	}
}

//Inserts a breakpoint by creating a grey highlight
function SetBreakpoint(evt){            
        var line = evt.target;
	
	if(line.nodeName == "tspan"){
		line = line.parentNode;
	}

	//put breakpoint functionality on highligt if it is over highlighted text
	var hl_num = line.getAttribute("id").split("_")[1];
	var hl = the_evt_target_ownerDocument.getElementById("code_hl" + hl_num);
	if(hl != null){
		hl.setAttribute("cursor", "pointer");
		hl.setAttribute("onclick", "RemoveBreakpoint(evt)");
	}
	
	var htb_bbox = code.line_llc.group.getBBox();
	var line_bbox = line.getBBox();
	var line_translation = getTranslate(line.getAttribute("transform"));

	var dx = line.getAttribute("dx");
	var dy = line.getAttribute("dy");
	if(dx == null){
		dx = 0;
	}else{
	    	dx = parseFloat(dx);
	}
	if(dy == null){
	    	dy = 0;
	}else{
	    	dy = parseFloat(dy);
	}

        var background = the_evt_target_ownerDocument.createElementNS(svgNS, "rect");
	background.setAttribute("x", line_bbox.x + line_translation[0] - code.line_llc.h_padding - dx);
	background.setAttribute("y", line_bbox.y + line_translation[1] - code.line_llc.v_padding - dy);
	background.setAttribute("width", htb_bbox.width + 2*code.line_llc.h_padding);
	background.setAttribute("height", line_bbox.height + 2*code.line_llc.v_padding);
	background.setAttribute("stroke", "blue");
	background.setAttribute("fill", "grey");
	background.setAttribute("id", code.line_llc.group.getAttribute("id") + "_bp" + line.getAttribute("id").split("_")[1]);
	background.setAttribute("transform", "translate(" + x_offset + " " + y_offset + ")");
	background.setAttribute("onclick", "RemoveBreakpoint(evt)");
	background.setAttribute("cursor", "pointer");
	code.highlight_group.parentNode.insertBefore(background, code.highlight_group);
	line.setAttribute("onclick", "RemoveBreakpoint(evt)");
}

//Removes a highlight by removing a grey highlight
function RemoveBreakpoint(evt){
	var line = evt.target;

	if(line.nodeName == "rect"){
		var id = "";
		if(line.getAttribute("id").indexOf("_bp") != -1){
			id = "l_" + evt.target.getAttribute("id").substring(evt.target.getAttribute("id").indexOf("_") + "_bp".length);
		}else if(line.getAttribute("id").indexOf("_hl") != -1){
			id = "l_" + evt.target.getAttribute("id").substring(evt.target.getAttribute("id").indexOf("_") + "_hl".length);
			line.setAttribute("cursor", "default");
			line.setAttribute("onclick", "");
		}else return;
		
		line = the_evt_target_ownerDocument.getElementById(id);
	}
	
	if(line.nodeName == "tspan"){
		line = line.parentNode;
	}
	
	if(line.nodeName == "text"){
		var background = the_evt_target_ownerDocument.getElementById(code.line_llc.group.getAttribute("id") + "_bp" + line.getAttribute("id").split("_")[1]);
		if(background != null){
			background.parentNode.removeChild(background);
			line.setAttribute("onclick", "SetBreakpoint(evt)");
		}	
	}
}


/**
*
*
*
* Graph animation functions
*
*
*/
//Sets color of vertex with id given by v to specified color
function SetVertexColor(v, color) {
    element = the_evt_target_ownerDocument.getElementById(v);
    element.setAttribute("fill", color);
}

//Colors edge with id given by e
function SetEdgeColor(e, color) {
    // NOTE: Gato signature SetEdgeColor(v, w, color)
    element = the_evt_target_ownerDocument.getElementById(e);
    element.setAttribute("stroke", color);
    //added changes to color of arrowheads
    element = the_evt_target_ownerDocument.getElementById(e_arrow_id + e);
    if(element != null){
        element.setAttribute("fill", color);
    }
}

//Sets color of all vertices of a given graph to a given color
//If vertices != null, then only color the set of vertices specified by vertices
function SetAllVerticesColor(graph_id_and_color, vertices) {

    var graph_id = graph_id_and_color.split("_")[0];
    var color = graph_id_and_color.split("_")[1];
    var children = the_evt_target_ownerDocument.getElementById(graph_id).childNodes;

    if(vertices != null){
    	for(i = 0; i < children.length; i++){
		for(j = 0; j < vertices.length; j++){
			if(children.item(i).nodeName == "circle" && children.item(i).getAttribute("id") == graph_id + "_" + vertices[j]){
				children.item(i).setAttribute("fill", color);
				break;
			}
		}
	}
    }else{
    	for(i = 0; i < children.length; i++){
		if(children.item(i).nodeName == "circle"){
			children.item(i).setAttribute("fill", color);
		}
	}
    }
    
}//Sets color of all vertices of a given graph to a given color
//If vertices != null, then only color the set of vertices specified by vertices
function SetAllVerticesColor(graph_id_and_color, vertices) {

    var graph_id = graph_id_and_color.split("_")[0];
    var color = graph_id_and_color.split("_")[1];
    var children = the_evt_target_ownerDocument.getElementById(graph_id).childNodes;

    if(vertices != null){
    	for(i = 0; i < children.length; i++){
		for(j = 0; j < vertices.length; j++){
			if(children.item(i).nodeName == "circle" && children.item(i).getAttribute("id") == graph_id + "_" + vertices[j]){
				children.item(i).setAttribute("fill", color);
				break;
			}
		}
	}
    }else{
    	for(i = 0; i < children.length; i++){
		if(children.item(i).nodeName == "circle"){
			children.item(i).setAttribute("fill", color);
		}
	}
    }
    
}

// Cannot map: SetAllEdgesColor(self, color, graph=None, leaveColors=None)
//Vertex blinks between black and current color
function BlinkVertex(v, color) {
    blinking = true;
    element = the_evt_target_ownerDocument.getElementById(v);
    blinkcolor = element.getAttribute("fill")
    blinkcount = 3;
    element.setAttribute("fill", "black");
    setTimeout(VertexBlinker, 3*timeout);
}
//Helper for BlinkVertex
function VertexBlinker() {
    if (blinkcount % 2 == 1) {
       element.setAttribute("fill", "black"); 
    } else {
       element.setAttribute("fill", blinkcolor); 
    }
    blinkcount = blinkcount - 1;
    if (blinkcount >= 0)
       setTimeout(VertexBlinker, 3*timeout);
    else
        blinking = false;
}


//Edge blinks between black and current color
function BlinkEdge(e, color){
    blinking = true;
    e_element = the_evt_target_ownerDocument.getElementById(e);
    e_blinkcolor = e_element.getAttribute("stroke");
    e_blinkcount = 3;
    e_element.setAttribute("stroke", "black");
    var element2 = the_evt_target_ownerDocument.getElementById(e_arrow_id + e);
    if(element2 != null){
        element2.setAttribute("fill", "black");
    }
    setTimeout(EdgeBlinker, 3*timeout);
    
}
//Helper for BlinkEdge
function EdgeBlinker(){
    var element2;
    if (e_blinkcount % 2 == 1) {
       e_element.setAttribute("stroke", "black");
       element2 = the_evt_target_ownerDocument.getElementById(e_arrow_id + e_element.getAttribute("id"));
       if(element2 != null){
           element2.setAttribute("fill", "black");
       }
    } else {
       e_element.setAttribute("stroke", e_blinkcolor);
       element2 = the_evt_target_ownerDocument.getElementById(e_arrow_id + e_element.getAttribute("id"));
       if(element2 != null){
           element2.setAttribute("fill", e_blinkcolor);
       }
    }
    e_blinkcount = e_blinkcount - 1;
    if (e_blinkcount >= 0)
       setTimeout(EdgeBlinker, 3*timeout);
    else
        blinking = false;
}

//Blink(self, list, color=None):
//Sets the frame width of a vertex
function SetVertexFrameWidth(v, val) {
    var element = the_evt_target_ownerDocument.getElementById(v);
    element.setAttribute("stroke-width", val);
    var graph = the_evt_target_ownerDocument.getElementById(v).parentNode;
    var rect = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id") + "_bg");
    rect.setAttribute("width",graph.getBBox().width);
    rect.setAttribute("height",graph.getBBox().height);
    rect.setAttribute("x", graph.getBBox().x);
    rect.setAttribute("y", graph.getBBox().y);
}

//Sets annotation of vertex v to annotation.  Annotation's color is specified
function SetVertexAnnotation(v, annotation, color) //removed 'self' parameter to because 'self' parameter was assigned value of v, v of annotation, and so on.
{
    element = the_evt_target_ownerDocument.getElementById(v);
    
    if(element != null){
    	if(typeof color == "undefined")
		color = "black";		
		
	if(the_evt_target_ownerDocument.getElementById(v_ano_id + v) !=null){
		ano = the_evt_target_ownerDocument.getElementById(v_ano_id + v);
		ano.parentNode.removeChild(ano);
	
	}
	
	var newano = the_evt_target_ownerDocument.createElementNS(svgNS,"text");
	x_pos = parseFloat(element.getAttribute("cx")) + parseFloat(element.getAttribute("r")) + 1;
	y_pos = parseFloat(element.getAttribute("cy")) + parseFloat(element.getAttribute("r")) + 1;
	newano.setAttribute("x", x_pos);
	newano.setAttribute("y", y_pos);
	newano.setAttribute("fill",color);
	newano.setAttribute("id", v_ano_id+v);
	newano.setAttribute("text-anchor","center");
	newano.setAttribute("font-size","14.0");
	newano.setAttribute("font-family","Helvetica");
	newano.setAttribute("font-style","normal");
	newano.setAttribute("font-weight","bold");
	newano.appendChild(the_evt_target_ownerDocument.createTextNode(annotation));
	element.parentNode.appendChild(newano);

	var graph = the_evt_target_ownerDocument.getElementById(v).parentNode;
	var rect = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id") + "_bg");
	rect.setAttribute("width",graph.getBBox().width);
	rect.setAttribute("height",graph.getBBox().height);
	rect.setAttribute("x", graph.getBBox().x);
	rect.setAttribute("y", graph.getBBox().y);
    }
}

//Line with specified id is highlighted.  Becomes current line of code.  Previous highlight is removed.
function ShowActive(line_id){
	for(i = 0; i < code.line_llc.group.childNodes.length; i++){
		if(code.line_llc.group.childNodes.item(i).getAttribute("id") == line_id){
			code.removeHighlight(current_line-1);
			code.highlightLine(i);
			current_line = i+1;
			if(the_evt_target_ownerDocument.getElementById("code_bp" + current_line) != null){
				var hl = the_evt_target_ownerDocument.getElementById("code_hl" + current_line);
				hl.setAttribute("cursor", "pointer");
				hl.setAttribute("onclick", "RemoveBreakpoint(evt)");
			}
			break;
		}
	}
}

//Directed or undirected added to graph.
function AddEdge(edge_id){
	var graph_id = edge_id.split("_")[0];
	var vertices = edge_id.split("_")[1].match(/[^,\(\)\s]+/g);
	var v = the_evt_target_ownerDocument.getElementById(graph_id + "_" + vertices[0]);
	var w = the_evt_target_ownerDocument.getElementById(graph_id + "_" + vertices[1]);
	
	var vx = v.getAttribute("cx");
	var wx = w.getAttribute("cx");
	var vy = v.getAttribute("cy");
	var wy = w.getAttribute("cy");
	
	if(v != null && w != null && the_evt_target_ownerDocument.getElementById(graph_id + "_(" + vertices[0] + ", " + vertices[1] + ")") == null){
		var parent_graph = the_evt_target_ownerDocument.getElementById(graph_id);
		var arrowhead = null;
		var edge = null;
		
		if(parent_graph.getAttribute("type") == "directed"){
			var reverse_edge = the_evt_target_ownerDocument.getElementById(graph_id + "_(" + vertices[1] + ", " + vertices[0] + ")");
			if(reverse_edge != null){  //reverse edge exists.  Make this edge an arc.
				//Another directed edge.  Great... Change existing edge to arc and add new arc
				//Be sure to alter polylines as well.	
				var l = Math.sqrt(Math.pow((parseFloat(vx)-parseFloat(wx)),2) + Math.pow((parseFloat(vy)-parseFloat(wy)),2));
				
				if(l < 0.001)
					l = 0.001;
				
				var c = (l - default_vertex_radius)/l - 0.001;
				var tmpX = parseFloat(vx) + c * (parseFloat(wx) - parseFloat(vx));
				var tmpY = parseFloat(vy) + c * (parseFloat(wy) - parseFloat(vy));
				
				
				var orthogonal = Orthogonal((parseFloat(wx)-parseFloat(vx)),(parseFloat(wy)-parseFloat(vy)));
				
				var mX = orthogonal[0];
				var mY = orthogonal[1];
				c = 1.5*default_vertex_radius + l/25;
				mX = parseFloat(vx) + .5 * (parseFloat(wx) - parseFloat(vx)) + c * mX
				mY = parseFloat(vy) + .5 * (parseFloat(wy) - parseFloat(vy)) + c * mY
				
				
				
				arrowhead = createArrowhead(mX, mY, wx, wy, 4.0, "ea" + edge_id);
				
				
				l = Math.sqrt(Math.pow(wx-mX,2) + Math.pow(wy-mY,2));
               
				if (l < .001)
					l = .001;
				

				c = (l-2*default_vertex_radius)/l + .01;
				tmpX = mX + c*(wx - mX);
				tmpY = mY + c*(wy - mY);
				
				
				edge = the_evt_target_ownerDocument.createElementNS(svgNS,"path");
				edge.setAttribute("id", edge_id);
				edge.setAttribute("stroke", "#EEEEEE");
				edge.setAttribute("stroke-width", 4.0);
				edge.setAttribute("fill", "none");
				edge.setAttribute("d", "M " + vx +"," + vy +" Q "+ mX +"," + mY + " " + tmpX + "," + tmpY);
	    
				parent_graph.insertBefore(edge, parent_graph.childNodes.item(0));
				if(arrowhead != null)
					parent_graph.insertBefore(arrowhead, parent_graph.childNodes.item(1));
					
					
				if(reverse_edge.getAttribute("d") == null){
					reverse_edge.parentNode.removeChild(the_evt_target_ownerDocument.getElementById("ea" + reverse_edge.getAttribute("id")));
					reverse_edge.parentNode.removeChild(reverse_edge);
					AddEdge(reverse_edge.getAttribute("id"));
				}
				the_evt_target_ownerDocument.getElementById(reverse_edge.getAttribute("id")).setAttribute("stroke", reverse_edge.getAttribute("stroke"));
				the_evt_target_ownerDocument.getElementById("ea" + reverse_edge.getAttribute("id")).setAttribute("fill", reverse_edge.getAttribute("stroke"));
			}else{  //No reverse edge.  Just make a straight line
                                edge = the_evt_target_ownerDocument.createElementNS(svgNS,"line");
                                edge.setAttribute("id", edge_id);
                                edge.setAttribute("stroke", "#EEEEEE");
                                edge.setAttribute("stroke-width", 4.0);
				edge.setAttribute("x1", vx);
				edge.setAttribute("y1", vy);

				var l = Math.sqrt(Math.pow((parseFloat(wx)-parseFloat(vx)),2) + Math.pow((parseFloat(wy)-parseFloat(vy)),2));
               
				if (l < .001)
					l = .001;

				var c = (l-2*default_vertex_radius)/l + .01;
				var tmpX = parseFloat(vx) + c*(parseFloat(wx) - parseFloat(vx));
				var tmpY = parseFloat(vy) + c*(parseFloat(wy) - parseFloat(vy));
								
				edge.setAttribute("x2", tmpX);
				edge.setAttribute("y2", tmpY);

				arrowhead = createArrowhead(vx, vy, wx, wy, 4.0, "ea" + edge_id);	
				
				parent_graph.insertBefore(edge, parent_graph.childNodes.item(0));
				if(arrowhead != null)
					parent_graph.insertBefore(arrowhead, parent_graph.childNodes.item(1));
			}
		}else{ //Undirected edge
                        edge = the_evt_target_ownerDocument.createElementNS(svgNS,"line");
            		edge.setAttribute("id", edge_id);
                	edge.setAttribute("stroke", "#EEEEEE");
                	edge.setAttribute("stroke-width", 4.0);
			edge.setAttribute("x1", vx);
			edge.setAttribute("y1", vy);
			edge.setAttribute("x2", wx);
			edge.setAttribute("y2", wy);
			
			parent_graph.insertBefore(edge, parent_graph.childNodes.item(0));
			if(arrowhead != null)
				parent_graph.insertBefore(arrowhead, parent_graph.childNodes.item(1));
		}

		var graph = the_evt_target_ownerDocument.getElementById(edge_id).parentNode;
		var rect = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id") + "_bg");
		rect.setAttribute("width",graph.getBBox().width);
		rect.setAttribute("height",graph.getBBox().height);
		rect.setAttribute("x", graph.getBBox().x);
		rect.setAttribute("y", graph.getBBox().y);
	}
}

//Deletes edge of corresponding id from graph
function DeleteEdge(edge_id){
	var edge =  the_evt_target_ownerDocument.getElementById(edge_id);
	if(edge != null){
		edge.parentNode.removeChild(edge);
	}
	var arrowhead = the_evt_target_ownerDocument.getElementById("ea" + edge_id);
	
	if(arrowhead != null){
		arrowhead.parentNode.removeChild(arrowhead);
	}

	var graph_id = edge_id.split("_")[0];
	var vertices = edge_id.split("_")[1].match(/[^,\(\)\s]+/g);
	var reverse_edge = the_evt_target_ownerDocument.getElementById(graph_id + "_(" + vertices[1] + ", " + vertices[0] + ")");
	if(reverse_edge != null){
            DeleteEdge(reverse_edge.getAttribute("id"));
            AddEdge(reverse_edge.getAttribute("id"));
            var new_edge = the_evt_target_ownerDocument.getElementById(reverse_edge.getAttribute("id"));
            new_edge.setAttribute("stroke", reverse_edge.getAttribute("stroke"));
            new_edge.setAttribute("stroke-width", reverse_edge.getAttribute("stroke-width"));
            var arrowhead = the_evt_target_ownerDocument.getElementById("ea" + new_edge.getAttribute("id"));
            if(arrowhead != null){
                arrowhead.setAttribute("fill", new_edge.getAttribute("stroke"));
            }
	}

	var graph = the_evt_target_ownerDocument.getElementById(graph_id);
	var rect = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id") + "_bg");
	rect.setAttribute("width",graph.getBBox().width);
	rect.setAttribute("height",graph.getBBox().height);
	rect.setAttribute("x", graph.getBBox().x);
	rect.setAttribute("y", graph.getBBox().y);
}

//Adds vertex of into specified graph and coordinates in graph.  Optional id argument may be given.
function AddVertex(graph_and_coordinates, id){

	var graph = the_evt_target_ownerDocument.getElementById(graph_and_coordinates.split("_")[0]);
	var next_vertex = 1;
	while(true){
		if(the_evt_target_ownerDocument.getElementById(graph.getAttribute("id") + "_" + next_vertex) == null){
			break;
		}
		next_vertex++;
	}

	
	var coords = graph_and_coordinates.split("(")[1].match(/[\d\.]+/g);
	
	var new_vertex = the_evt_target_ownerDocument.createElementNS(svgNS,"circle");
	new_vertex.setAttribute("cx", coords[0]);
	new_vertex.setAttribute("cy", coords[1]);
	new_vertex.setAttribute("r", default_vertex_radius);
	new_vertex.setAttribute("fill", "#000099");
	new_vertex.setAttribute("stroke", "black");
	new_vertex.setAttribute("stroke-width", 0.0);

	if(id != null){
		new_vertex.setAttribute("id", graph.getAttribute("id") + "_" + id);
		if(the_evt_target_ownerDocument.getElementById(new_vertex.getAttribute("id")) != null)
			return;
	}else{
		new_vertex.setAttribute("id", graph.getAttribute("id") + "_" + next_vertex);
	}

	graph.appendChild(new_vertex);
	

	var new_label = the_evt_target_ownerDocument.createElementNS(svgNS,"text");
	new_label.setAttribute("x", coords[0]);
	new_label.setAttribute("y", parseFloat(coords[1]) + .33*parseFloat(new_vertex.getAttribute("r")));
	new_label.setAttribute("text-anchor", "middle");
	new_label.setAttribute("fill", "white");
	new_label.setAttribute("font-family", "Helvetica");
	new_label.setAttribute("font-size", 14.0);
	new_label.setAttribute("font-style", "normal");
	new_label.setAttribute("font-weight", "bold");
	new_label.setAttribute("id", "vl" + new_vertex.getAttribute("id"));

	if(id != null){
		new_label.appendChild(the_evt_target_ownerDocument.createTextNode(id));
	}else{
		new_label.appendChild(the_evt_target_ownerDocument.createTextNode(next_vertex + ""));
	}
	graph.appendChild(new_label);


        //resnap graph to fit	

	for(k = 0; k < vert_layout[1].group.childNodes.length; k++){
		vert_layout[1].resnapComponent(k);
	
		if(vert_layout[1].group.childNodes.item(x).nodeName == "g"){
			var graph = vert_layout[1].group.childNodes.item(k);
			var rect = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id") + "_bg");
			rect.setAttribute("width",graph.getBBox().width);
			rect.setAttribute("height",graph.getBBox().height);
			rect.setAttribute("x", graph.getBBox().x);
			rect.setAttribute("y", graph.getBBox().y);
			var translation1 = getTranslate(vert_layout[1].group.getAttribute("transform"));
			var translation2 = getTranslate(horiz_layout.group.getAttribute("transform"));
			var translation3 = getTranslate(graph.getAttribute("transform"));
			setTranslate(rect, translation1[0] + translation2[0] + translation3[0], translation1[1] + translation2[1] + translation3[1]);
		}
	}
}

//function SetEdgeAnnotation(self,tail,head,annotation,color="black"):
//def UpdateVertexLabel(self, v, blink=1, color=None):
/**
*
*
*
* iPad functions
*
*
*
*/
//iPad-specific slider event handling
function TouchDrag_SSlider(evt){
	evt.preventDefault();
	Drag_SSlider(evt);
}

function TouchStart_SSlider(evt){
	evt.preventDefault();
	Click_SSlider(evt);
}
function TouchDeactivate_SSlider(evt){
	evt.preventDefault();
	Deactivate_SSlider(evt);
}

//iPad-specific graph translations
function TouchDrag_Graph(evt){
	if(evt.touches == undefined || evt.touches.length != 1)
		return;

	evt.preventDefault();
	TranslateGraph(evt);
}

function TouchStart_Graph(evt){
	if(evt.touches == undefined || evt.touches.length != 1)
		return;
	evt.preventDefault();
	translate_buffer = [evt.touches[0].clientX, evt.touches[0].clientY];
}

function TouchDeactivate_Graph(evt){
	if(evt.touches == undefined || evt.touches.length != 1)
		return;
	evt.preventDefault();
	translate_buffer = [];
}

function TranslateGraph(evt){
	var graph = evt.target;
	var graph_bg = null;
	if(graph.nodeName == "rect"){
		graph_bg = graph;
		graph = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id").split("_")[0]);
	}else{
		graph = graph.parentNode;
		graph_bg = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id") + "_bg");
	}
	
	var x = evt.clientX;
	if(x == undefined)
		x = evt.touches[0].clientX;
	var y = evt.clientX;
	if(y == undefined)
		y = evt.touches[0].clientY;
	
	var translation = getTranslate(graph.getAttribute("transform"));
	var bg_translation = getTranslate(graph_bg.getAttribute("transform"));
	setTranslate(graph, translation[0] + (x-translate_buffer[0]), translation[1] + (y - translate_buffer[1]));
	setTranslate(graph_bg, bg_translation[0] + (x-translate_buffer[0]), bg_translation[1] + (y - translate_buffer[1]));
	graph.setAttribute("transform_buffer", graph.getAttribute("transform"));
	graph_bg.setAttribute("transform_buffer", graph_bg.getAttribute("transform"));
	translate_buffer[0] = x;
	translate_buffer[1] = y;

	the_evt_target_ownerDocument.documentElement.setAttribute("width", 2*x_offset + horiz_layout.group.getBBox().x + horiz_layout.group.getBBox().width);
        the_evt_target_ownerDocument.documentElement.setAttribute("height", 2*y_offset + horiz_layout.group.getBBox().y + horiz_layout.group.getBBox().height);
}

//iPad-specific functions for rotating and scaling graphs
function GestureStart_TransformGraph(evt){		
	if(evt.touches != undefined)
		return;
	evt.preventDefault();
	
	var graph = evt.target;
	var graph_bg = null;
	if(graph.nodeName == "rect"){
		graph_bg = graph;
		graph = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id").split("_")[0]);
	}else{
		graph = graph.parentNode;
		graph_bg = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id") + "_bg");
	}
	
	
	if(graph.getAttribute("transform_buffer") == null){		
		graph.setAttribute("transform_buffer", graph.getAttribute("transform"));
		graph_bg.setAttribute("transform_buffer", graph_bg.getAttribute("transform"));
	}
	
}

function GestureChange_TransformGraph(evt){
	if(evt.touches != undefined)
		return;
	evt.preventDefault();
	
	var graph = evt.target;
	var graph_bg = null;
	if(graph.nodeName == "rect"){
		graph_bg = graph;
		graph = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id").split("_")[0]);
	}else{
		graph = graph.parentNode;
		graph_bg = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id") + "_bg");
	}

	TransformGraph(graph, graph_bg, evt);
}

function GestureEnd_TransformGraph(evt){
	if(evt.touches != undefined)
		return;
		
	evt.preventDefault();
	
	var graph = evt.target;
	var graph_bg = null;
	if(graph.nodeName == "rect"){
		graph_bg = graph;
		graph = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id").split("_")[0]);
	}else{
		graph = graph.parentNode;
		graph_bg = the_evt_target_ownerDocument.getElementById(graph.getAttribute("id") + "_bg");
	}

	graph.setAttribute("transform_buffer", graph.getAttribute("transform"));
	graph_bg.setAttribute("transform_buffer", graph_bg.getAttribute("transform"));
}

function TransformGraph(graph, graph_bg, evt){
	var scale = evt.scale;
	
	var graph_scale = getScale(graph.getAttribute("transform_buffer"));
	var gbg_scale = getScale(graph_bg.getAttribute("transform_buffer"));
	var graph_scaling_factor = 1 - scale;
	var gbg_scaling_factor = 1 - scale;
	
	var gscf_width = graph_scaling_factor* graph.getBBox().width*graph_scale[0];
	var gscf_height = graph_scaling_factor* graph.getBBox().height*graph_scale[1];  
	var gbgscf_width = gbg_scaling_factor * graph_bg.getBBox().width*gbg_scale[0];
	var gbgscf_height = gbg_scaling_factor * graph_bg.getBBox().height*gbg_scale[1];
	
	setScale(graph, scale * graph_scale[0], scale * graph_scale[1]);
	setScale(graph_bg, scale * gbg_scale[0], scale * gbg_scale[1]);
	
	graph_translation = getTranslate(graph.getAttribute("transform_buffer"));
	gbg_translation = getTranslate(graph_bg.getAttribute("transform_buffer"));
	
	setTranslate(graph, graph_translation[0] + gscf_width/2, graph_translation[1] + gscf_height/2);
	setTranslate(graph_bg, gbg_translation[0] + gbgscf_width/2, gbg_translation[1] + gbgscf_height/2);
	
	the_evt_target_ownerDocument.documentElement.setAttribute("width", 2*x_offset + horiz_layout.group.getBBox().x + horiz_layout.group.getBBox().width);
	the_evt_target_ownerDocument.documentElement.setAttribute("height", 2*y_offset + horiz_layout.group.getBBox().y + horiz_layout.group.getBBox().height);
}


/**
*
*
*
* Main program
*
*
*/
function Initialize(evt) {
	the_evt = evt;
	the_evt_target = evt.target;
	the_evt_target_ownerDocument = evt.target.ownerDocument;
	HTB_prototypeInit();
	LLC_prototypeInit();
	BP_prototypeInit();


	
        //Create code layout
	code = new HighlightableTextBlock(2, 0, "code", 14, "vertical");

	var linenum = 1;
	while(the_evt_target_ownerDocument.getElementById("l_" + linenum) != null){
		code.insertLine("l_" + linenum, linenum-1);
		linenum++;
	}


	//Make code lines interactive
	var code_lines = code.line_llc.group.childNodes;
	for(i = 0; i < code_lines.length; i++){
            if(code_lines.item(i).nodeName == "text"){
                code_lines.item(i).setAttribute("cursor", "pointer");
                code_lines.item(i).setAttribute("onclick", "SetBreakpoint(evt)");
            }
	}


	//Clone initial graphs and keep references to them
	init_graphs = new Array();
	var i = 1;
	var tree = the_evt_target_ownerDocument.getElementById("g" + i);
	while(tree != null){
            init_graphs[i-1] = tree.cloneNode(true);
            i++;
            tree = the_evt_target_ownerDocument.getElementById("g" + i);
	}
		
	//Create buttons
	action_panel = new ButtonPanel(15, 2, "actions", "horizontal");
	action_panel.createButton("start_button", "M0,0 0,40 30,20 Z", "blue", 0, "StartAnimation(evt)");
	action_panel.createButton("step_button", "M0,0 0,40 30,20 Z M30,0 30,40 40,40 40,0 Z", "blue", 1, "StepAnimation(evt)");
	action_panel.createButton("continue_button", "M0,0 0,40 10,40 10,0 Z M20,0 20,40 50,20 Z", "blue", 2, "ContinueAnimation(evt)");
	action_panel.createButton("stop_button", "M0,0 0,40 40,40 40,0 Z", "blue", 3, "StopAnimation(evt)");
	action_panel.deactivateButton("continue_button");
	action_panel.deactivateButton("stop_button");
	action_panel.deactivateButton("step_button");


	//Create speed slider 
	speed_slider = new Slider("speed_slider", 400, 50, x_offset, [timeout,1], timeout/2, ["Slow", "Fast"], "Speed", [["ontouchstart","TouchStart_SSlider(evt)"],["ontouchmove", "TouchDrag_SSlider(evt)"],["ontouchend", "TouchDeactivate_SSlider(evt)"],["onmousedown", "Click_SSlider(evt)"],["onmouseup", "Deactivate_SSlider(evt)"], ["onmousemove","Drag_SSlider(evt)"]]);
	timeout = Math.log(timeout) * Math.log(timeout);

	//Lay out code, speed slider, and graphs
	horiz_layout = new LinearLayoutComponent(2, 2, "horizontal_layout", "horizontal");	
	vert_layout = new Array(new LinearLayoutComponent(2, 5, "vert_layout_0", "vertical"), new LinearLayoutComponent(2, 2, "vert_layout_1", "vertical"));
	vert_layout[0].insertComponent(code.line_llc.group.getAttribute("id"), 0);
	vert_layout[0].insertComponent(action_panel.llc.group.getAttribute("id"), 1);
	vert_layout[0].insertComponent(speed_slider.slider.getAttribute("id"), 2);


        for(x in init_graphs){
            vert_layout[1].insertComponent(init_graphs[x].getAttribute("id"), x);
	}
	horiz_layout.insertComponent(vert_layout[0].group.getAttribute("id"), 0);
	horiz_layout.insertComponent(vert_layout[1].group.getAttribute("id"), 1);
	
	//offset to make everything visible
	horiz_layout.group.setAttribute("transform", "translate(" + x_offset + " " + y_offset + ")");
	code.highlight_group.setAttribute("transform","translate(" + x_offset + " " + y_offset + ")");

	//Make rectangles behind graphs, for intuitive iPad usage
	for(x in init_graphs){
		var rect = the_evt_target_ownerDocument.createElementNS(svgNS, "rect");
		var graph = the_evt_target_ownerDocument.getElementById(init_graphs[x].getAttribute("id"));
		rect.setAttribute("id", graph.getAttribute("id") + "_bg");
		rect.setAttribute("width",graph.getBBox().width);
		rect.setAttribute("height",graph.getBBox().height);
        rect.setAttribute("fill", "white");
        rect.setAttribute("fill-opacity", 1);
        rect.setAttribute("stroke-width",1);
        rect.setAttribute("stroke",  "black");
        rect.setAttribute("stroke-dasharray", "5 2");
		rect.setAttribute("x", graph.getBBox().x);
		rect.setAttribute("y", graph.getBBox().y);
		rect.setAttribute("ongesturestart", "GestureStart_TransformGraph(evt)");
		rect.setAttribute("ongesturechange","GestureChange_TransformGraph(evt)");
		rect.setAttribute("ongestureend","GestureEnd_TransformGraph(evt)");
		rect.setAttribute("ontouchstart", "TouchStart_Graph(evt)");
		rect.setAttribute("ontouchmove", "TouchDrag_Graph(evt)");
		rect.setAttribute("ontouchend", "TouchDeactivate_Graph(evt)");
		var translation1 = getTranslate(vert_layout[1].group.getAttribute("transform"));
		var translation2 = getTranslate(horiz_layout.group.getAttribute("transform"));
		var translation3 = getTranslate(graph.getAttribute("transform"));
		setTranslate(rect, translation1[0] + translation2[0] + translation3[0], translation1[1] + translation2[1] + translation3[1]);
		the_evt_target_ownerDocument.documentElement.insertBefore(rect, the_evt_target_ownerDocument.documentElement.childNodes.item(0));
	}

	the_evt_target_ownerDocument.documentElement.setAttribute("width", x_offset + horiz_layout.group.getBBox().x + horiz_layout.group.getBBox().width);
	the_evt_target_ownerDocument.documentElement.setAttribute("height", y_offset + horiz_layout.group.getBBox().y + horiz_layout.group.getBBox().height);
}


var animation = Array(Array(1, SetAllVerticesColor, "g1_#EEEEEE"),
Array(3, SetVertexAnnotation, "g1_1", "None"),
Array(27, SetVertexAnnotation, "g1_2", "None"),
Array(27, SetVertexAnnotation, "g1_3", "None"),
Array(27, SetVertexAnnotation, "g1_4", "None"),
Array(27, SetVertexAnnotation, "g1_5", "None"),
Array(27, SetVertexAnnotation, "g1_6", "None"),
Array(27, SetVertexAnnotation, "g1_7", "None"),
Array(27, SetVertexAnnotation, "g1_8", "None"),
Array(27, SetVertexAnnotation, "g1_9", "None"),
Array(27, SetVertexAnnotation, "g1_10", "None"),
Array(27, SetVertexAnnotation, "g1_11", "None"),
Array(27, SetVertexAnnotation, "g1_12", "None"),
Array(27, SetVertexAnnotation, "g1_13", "None"),
Array(27, SetVertexAnnotation, "g1_14", "None"),
Array(29, ShowActive, "l_1"),
Array(9, ShowActive, "l_2"),
Array(9, SetVertexColor, "g1_1", "blue"),
Array(1, ShowActive, "l_3"),
Array(10, ShowActive, "l_4"),
Array(10, ShowActive, "l_6"),
Array(10, ShowActive, "l_7"),
Array(10, SetVertexColor, "g1_1", "red"),
Array(1, SetVertexFrameWidth, "g1_1", "6"),
Array(1, ShowActive, "l_8"),
Array(9, SetVertexAnnotation, "g1_1", "1"),
Array(27, ShowActive, "l_9"),
Array(10, ShowActive, "l_10"),
Array(10, SetVertexFrameWidth, "g1_1", "6"),
Array(1, SetEdgeColor, "g1_(1, 2)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(9, ShowActive, "l_12"),
Array(9, SetVertexColor, "g1_2", "blue"),
Array(1, ShowActive, "l_13"),
Array(9, SetEdgeColor, "g1_(1, 2)", "red"),
Array(1, ShowActive, "l_10"),
Array(10, SetEdgeColor, "g1_(1, 3)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(9, ShowActive, "l_12"),
Array(9, SetVertexColor, "g1_3", "blue"),
Array(1, ShowActive, "l_13"),
Array(9, SetEdgeColor, "g1_(1, 3)", "red"),
Array(1, ShowActive, "l_10"),
Array(8, SetVertexFrameWidth, "g1_1", "0"),
Array(1, ShowActive, "l_6"),
Array(9, ShowActive, "l_7"),
Array(9, SetVertexColor, "g1_2", "red"),
Array(1, SetVertexFrameWidth, "g1_1", "0"),
Array(1, SetVertexFrameWidth, "g1_2", "6"),
Array(1, ShowActive, "l_8"),
Array(9, SetVertexAnnotation, "g1_2", "2"),
Array(27, ShowActive, "l_9"),
Array(9, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_2", "6"),
Array(1, SetEdgeColor, "g1_(2, 5)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(9, ShowActive, "l_12"),
Array(10, SetVertexColor, "g1_5", "blue"),
Array(1, ShowActive, "l_13"),
Array(10, SetEdgeColor, "g1_(2, 5)", "red"),
Array(1, ShowActive, "l_10"),
Array(10, SetEdgeColor, "g1_(2, 4)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(10, ShowActive, "l_12"),
Array(10, SetVertexColor, "g1_4", "blue"),
Array(1, ShowActive, "l_13"),
Array(10, SetEdgeColor, "g1_(2, 4)", "red"),
Array(1, ShowActive, "l_10"),
Array(10, SetVertexFrameWidth, "g1_2", "0"),
Array(1, ShowActive, "l_6"),
Array(9, ShowActive, "l_7"),
Array(9, SetVertexColor, "g1_3", "red"),
Array(1, SetVertexFrameWidth, "g1_2", "0"),
Array(1, SetVertexFrameWidth, "g1_3", "6"),
Array(1, ShowActive, "l_8"),
Array(9, SetVertexAnnotation, "g1_3", "3"),
Array(27, ShowActive, "l_9"),
Array(9, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_3", "6"),
Array(1, SetEdgeColor, "g1_(3, 6)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(9, ShowActive, "l_12"),
Array(9, SetVertexColor, "g1_6", "blue"),
Array(1, ShowActive, "l_13"),
Array(9, SetEdgeColor, "g1_(3, 6)", "red"),
Array(1, ShowActive, "l_10"),
Array(9, SetEdgeColor, "g1_(3, 7)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(8, ShowActive, "l_12"),
Array(9, SetVertexColor, "g1_7", "blue"),
Array(1, ShowActive, "l_13"),
Array(9, SetEdgeColor, "g1_(3, 7)", "red"),
Array(1, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_3", "0"),
Array(1, ShowActive, "l_6"),
Array(9, ShowActive, "l_7"),
Array(10, SetVertexColor, "g1_5", "red"),
Array(1, SetVertexFrameWidth, "g1_3", "0"),
Array(1, SetVertexFrameWidth, "g1_5", "6"),
Array(1, ShowActive, "l_8"),
Array(10, SetVertexAnnotation, "g1_5", "4"),
Array(27, ShowActive, "l_9"),
Array(10, ShowActive, "l_10"),
Array(10, SetVertexFrameWidth, "g1_5", "6"),
Array(1, SetEdgeColor, "g1_(5, 9)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(9, ShowActive, "l_12"),
Array(9, SetVertexColor, "g1_9", "blue"),
Array(1, ShowActive, "l_13"),
Array(10, SetEdgeColor, "g1_(5, 9)", "red"),
Array(1, ShowActive, "l_10"),
Array(10, SetVertexFrameWidth, "g1_5", "0"),
Array(1, ShowActive, "l_6"),
Array(9, ShowActive, "l_7"),
Array(9, SetVertexColor, "g1_4", "red"),
Array(1, SetVertexFrameWidth, "g1_5", "0"),
Array(1, SetVertexFrameWidth, "g1_4", "6"),
Array(1, ShowActive, "l_8"),
Array(9, SetVertexAnnotation, "g1_4", "5"),
Array(27, ShowActive, "l_9"),
Array(9, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_4", "6"),
Array(1, SetEdgeColor, "g1_(4, 8)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(9, ShowActive, "l_12"),
Array(9, SetVertexColor, "g1_8", "blue"),
Array(1, ShowActive, "l_13"),
Array(9, SetEdgeColor, "g1_(4, 8)", "red"),
Array(1, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_4", "0"),
Array(1, ShowActive, "l_6"),
Array(9, ShowActive, "l_7"),
Array(10, SetVertexColor, "g1_6", "red"),
Array(1, SetVertexFrameWidth, "g1_4", "0"),
Array(1, SetVertexFrameWidth, "g1_6", "6"),
Array(1, ShowActive, "l_8"),
Array(9, SetVertexAnnotation, "g1_6", "6"),
Array(27, ShowActive, "l_9"),
Array(9, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_6", "6"),
Array(1, SetEdgeColor, "g1_(6, 10)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(9, ShowActive, "l_12"),
Array(9, SetVertexColor, "g1_10", "blue"),
Array(1, ShowActive, "l_13"),
Array(9, SetEdgeColor, "g1_(6, 10)", "red"),
Array(1, ShowActive, "l_10"),
Array(8, SetVertexFrameWidth, "g1_6", "0"),
Array(1, ShowActive, "l_6"),
Array(9, ShowActive, "l_7"),
Array(9, SetVertexColor, "g1_7", "red"),
Array(1, SetVertexFrameWidth, "g1_6", "0"),
Array(1, SetVertexFrameWidth, "g1_7", "6"),
Array(1, ShowActive, "l_8"),
Array(8, SetVertexAnnotation, "g1_7", "7"),
Array(28, ShowActive, "l_9"),
Array(10, ShowActive, "l_10"),
Array(10, SetVertexFrameWidth, "g1_7", "6"),
Array(1, SetEdgeColor, "g1_(7, 11)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(10, ShowActive, "l_12"),
Array(10, SetVertexColor, "g1_11", "blue"),
Array(1, ShowActive, "l_13"),
Array(9, SetEdgeColor, "g1_(7, 11)", "red"),
Array(1, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_7", "0"),
Array(1, ShowActive, "l_6"),
Array(9, ShowActive, "l_7"),
Array(9, SetVertexColor, "g1_9", "red"),
Array(1, SetVertexFrameWidth, "g1_7", "0"),
Array(1, SetVertexFrameWidth, "g1_9", "6"),
Array(1, ShowActive, "l_8"),
Array(9, SetVertexAnnotation, "g1_9", "8"),
Array(27, ShowActive, "l_9"),
Array(9, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_9", "6"),
Array(1, SetEdgeColor, "g1_(9, 12)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(9, ShowActive, "l_12"),
Array(9, SetVertexColor, "g1_12", "blue"),
Array(1, ShowActive, "l_13"),
Array(8, SetEdgeColor, "g1_(9, 12)", "red"),
Array(1, ShowActive, "l_10"),
Array(8, SetVertexFrameWidth, "g1_9", "0"),
Array(1, ShowActive, "l_6"),
Array(10, ShowActive, "l_7"),
Array(10, SetVertexColor, "g1_8", "red"),
Array(1, SetVertexFrameWidth, "g1_9", "0"),
Array(1, SetVertexFrameWidth, "g1_8", "6"),
Array(1, ShowActive, "l_8"),
Array(9, SetVertexAnnotation, "g1_8", "9"),
Array(27, ShowActive, "l_9"),
Array(10, ShowActive, "l_10"),
Array(10, SetVertexFrameWidth, "g1_8", "6"),
Array(1, SetEdgeColor, "g1_(8, 12)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(10, ShowActive, "l_10"),
Array(9, SetEdgeColor, "g1_(8, 12)", "grey"),
Array(1, SetVertexFrameWidth, "g1_8", "0"),
Array(1, ShowActive, "l_6"),
Array(9, ShowActive, "l_7"),
Array(9, SetVertexColor, "g1_10", "red"),
Array(1, SetVertexFrameWidth, "g1_8", "0"),
Array(1, SetVertexFrameWidth, "g1_10", "6"),
Array(1, ShowActive, "l_8"),
Array(9, SetVertexAnnotation, "g1_10", "10"),
Array(27, ShowActive, "l_9"),
Array(9, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_10", "6"),
Array(1, SetEdgeColor, "g1_(10, 13)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(9, ShowActive, "l_12"),
Array(9, SetVertexColor, "g1_13", "blue"),
Array(1, ShowActive, "l_13"),
Array(8, SetEdgeColor, "g1_(10, 13)", "red"),
Array(1, ShowActive, "l_10"),
Array(8, SetVertexFrameWidth, "g1_10", "0"),
Array(1, ShowActive, "l_6"),
Array(9, ShowActive, "l_7"),
Array(10, SetVertexColor, "g1_11", "red"),
Array(1, SetVertexFrameWidth, "g1_10", "0"),
Array(1, SetVertexFrameWidth, "g1_11", "6"),
Array(1, ShowActive, "l_8"),
Array(9, SetVertexAnnotation, "g1_11", "11"),
Array(27, ShowActive, "l_9"),
Array(10, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_11", "6"),
Array(1, SetEdgeColor, "g1_(11, 13)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(10, ShowActive, "l_10"),
Array(9, SetEdgeColor, "g1_(11, 13)", "grey"),
Array(1, SetVertexFrameWidth, "g1_11", "0"),
Array(1, ShowActive, "l_6"),
Array(9, ShowActive, "l_7"),
Array(9, SetVertexColor, "g1_12", "red"),
Array(1, SetVertexFrameWidth, "g1_11", "0"),
Array(1, SetVertexFrameWidth, "g1_12", "6"),
Array(1, ShowActive, "l_8"),
Array(10, SetVertexAnnotation, "g1_12", "12"),
Array(27, ShowActive, "l_9"),
Array(10, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_12", "6"),
Array(1, SetEdgeColor, "g1_(12, 14)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(9, ShowActive, "l_12"),
Array(9, SetVertexColor, "g1_14", "blue"),
Array(1, ShowActive, "l_13"),
Array(10, SetEdgeColor, "g1_(12, 14)", "red"),
Array(1, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_12", "0"),
Array(1, ShowActive, "l_6"),
Array(9, ShowActive, "l_7"),
Array(9, SetVertexColor, "g1_13", "red"),
Array(1, SetVertexFrameWidth, "g1_12", "0"),
Array(1, SetVertexFrameWidth, "g1_13", "6"),
Array(1, ShowActive, "l_8"),
Array(9, SetVertexAnnotation, "g1_13", "13"),
Array(27, ShowActive, "l_9"),
Array(9, ShowActive, "l_10"),
Array(9, SetVertexFrameWidth, "g1_13", "6"),
Array(1, SetEdgeColor, "g1_(13, 14)", "yellow"),
Array(1, ShowActive, "l_11"),
Array(9, ShowActive, "l_10"),
Array(9, SetEdgeColor, "g1_(13, 14)", "grey"),
Array(1, SetVertexFrameWidth, "g1_13", "0"),
Array(1, ShowActive, "l_6"),
Array(8, ShowActive, "l_7"),
Array(9, SetVertexColor, "g1_14", "red"),
Array(1, SetVertexFrameWidth, "g1_13", "0"),
Array(1, SetVertexFrameWidth, "g1_14", "6"),
Array(1, ShowActive, "l_8"),
Array(10, SetVertexAnnotation, "g1_14", "14"),
Array(27, ShowActive, "l_9"),
Array(10, ShowActive, "l_10"),
Array(10, SetVertexFrameWidth, "g1_14", "6"),
Array(1, SetVertexFrameWidth, "g1_14", "0"),
Array(1, ShowActive, "l_6")
);

]]></script>
<g id="g1" transform="translate(200,0)" type="directed" ongesturestart="GestureStart_TransformGraph(evt)" ongesturechange="GestureChange_TransformGraph(evt)" ongestureend="GestureEnd_TransformGraph(evt)" ontouchstart="TouchStart_Graph(evt)" ontouchmove="TouchDrag_Graph(evt)" ontouchend="TouchDeactivate_Graph(evt)">
<line id="g1_(1, 2)" x1="50.0" y1="200.0" x2="131.201010" y2="118.798990" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(1, 2)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(130.201010,109.798990) rotate(-44.714949 0.000000 10.000000)" />
<line id="g1_(1, 3)" x1="50.0" y1="200.0" x2="131.201010" y2="281.201010" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(1, 3)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(130.201010,270.201010) rotate(44.714949 0.000000 10.000000)" />
<line id="g1_(2, 5)" x1="150.0" y1="100.0" x2="225.956039" y2="137.978019" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(2, 5)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(224.956039,127.478019) rotate(26.565051 0.000000 10.000000)" />
<line id="g1_(2, 4)" x1="150.0" y1="100.0" x2="225.956039" y2="62.021981" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(2, 4)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(224.956039,52.521981) rotate(-27.021582 0.000000 10.000000)" />
<line id="g1_(3, 6)" x1="150.0" y1="300.0" x2="225.956039" y2="262.021981" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(3, 6)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(224.956039,252.521981) rotate(-26.565051 0.000000 10.000000)" />
<line id="g1_(3, 7)" x1="150.0" y1="300.0" x2="225.956039" y2="337.978019" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(3, 7)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(224.956039,327.478019) rotate(26.565051 0.000000 10.000000)" />
<line id="g1_(4, 8)" x1="250.0" y1="50.0" x2="272.500000" y2="50.000000" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(4, 8)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(272.000000,40.000000) rotate(0.000000 0.000000 10.000000)" />
<line id="g1_(5, 9)" x1="250.0" y1="150.0" x2="272.500000" y2="150.000000" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(5, 9)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(272.000000,140.000000) rotate(0.000000 0.000000 10.000000)" />
<line id="g1_(6, 10)" x1="250.0" y1="250.0" x2="272.500000" y2="250.000000" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(6, 10)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(272.000000,240.000000) rotate(0.000000 0.000000 10.000000)" />
<line id="g1_(7, 11)" x1="250.0" y1="350.0" x2="272.500000" y2="350.000000" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(7, 11)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(272.000000,340.000000) rotate(0.000000 0.000000 10.000000)" />
<line id="g1_(8, 12)" x1="300.0" y1="50.0" x2="375.956039" y2="87.978019" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(8, 12)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(374.956039,77.478019) rotate(27.021582 0.000000 10.000000)" />
<line id="g1_(9, 12)" x1="300.0" y1="150.0" x2="375.956039" y2="112.021981" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(9, 12)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(374.956039,102.521981) rotate(-26.565051 0.000000 10.000000)" />
<line id="g1_(10, 13)" x1="300.0" y1="250.0" x2="375.956039" y2="287.978019" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(10, 13)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(374.956039,277.478019) rotate(26.565051 0.000000 10.000000)" />
<line id="g1_(11, 13)" x1="300.0" y1="350.0" x2="375.956039" y2="312.021981" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(11, 13)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(374.956039,302.521981) rotate(-26.565051 0.000000 10.000000)" />
<line id="g1_(12, 14)" x1="400.0" y1="100.0" x2="481.201010" y2="181.201010" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(12, 14)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(480.201010,170.201010) rotate(45.000000 0.000000 10.000000)" />
<line id="g1_(13, 14)" x1="400.0" y1="300.0" x2="481.201010" y2="218.798990" stroke="#DDDDDD" stroke-width="4.0" />
<polyline id="eag1_(13, 14)" points="0.000000 0.000000 0.000000 20.000000 14.0 10.000000" fill="#DDDDDD" transform="translate(480.201010,209.798990) rotate(-45.000000 0.000000 10.000000)" />
<circle id="g1_1" cx="50.0" cy="200.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_1" x="50.0" y="204.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >1</text>
<circle id="g1_2" cx="150.0" cy="100.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_2" x="150.0" y="104.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >2</text>
<circle id="g1_3" cx="150.0" cy="300.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_3" x="150.0" y="304.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >3</text>
<circle id="g1_4" cx="250.0" cy="50.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_4" x="250.0" y="54.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >4</text>
<circle id="g1_5" cx="250.0" cy="150.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_5" x="250.0" y="154.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >5</text>
<circle id="g1_6" cx="250.0" cy="250.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_6" x="250.0" y="254.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >6</text>
<circle id="g1_7" cx="250.0" cy="350.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_7" x="250.0" y="354.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >7</text>
<circle id="g1_8" cx="300.0" cy="50.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_8" x="300.0" y="54.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >8</text>
<circle id="g1_9" cx="300.0" cy="150.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_9" x="300.0" y="154.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >9</text>
<circle id="g1_10" cx="300.0" cy="250.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_10" x="300.0" y="254.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >10</text>
<circle id="g1_11" cx="300.0" cy="350.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_11" x="300.0" y="354.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >11</text>
<circle id="g1_12" cx="400.0" cy="100.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_12" x="400.0" y="104.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >12</text>
<circle id="g1_13" cx="400.0" cy="300.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_13" x="400.0" y="304.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >13</text>
<circle id="g1_14" cx="500.0" cy="200.0" r="14.0" fill="#EEEEEE" stroke="black" stroke-width="0.0" />
<text id="vlg1_14" x="500.0" y="204.62" text-anchor="middle" fill="white" font-family="Helvetica" font-size="14.0" font-style="normal" font-weight="bold" >14</text>
</g>
<text blank = "false" id="l_1" x="10" y="10" dx="0" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"><tspan dx = "0">root</tspan><tspan dx="7">=</tspan><tspan dx="7">PickVertex</tspan><tspan>(</tspan><tspan>)</tspan></text>
<text blank = "false" id="l_2" x="10" y="10" dx="0" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"><tspan dx = "0">Q</tspan><tspan>.</tspan><tspan>Append</tspan><tspan>(</tspan><tspan>root</tspan><tspan>)</tspan></text>
<text blank = "false" id="l_3" x="10" y="10" dx="0" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"><tspan dx = "0">pred</tspan><tspan>[</tspan><tspan>root</tspan><tspan>]</tspan><tspan dx="7">=</tspan><tspan dx="7">root</tspan></text>
<text blank = "false" id="l_4" x="10" y="10" dx="0" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"><tspan dx = "0">step</tspan><tspan dx="7">=</tspan><tspan dx="7">1</tspan></text>
<text blank = "true" id="l_5" x="10" y="10" dx="0" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"></text>
<text blank = "false" id="l_6" x="10" y="10" dx="0" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"><tspan font-weight="bold" dx="0">while</tspan><tspan dx="7">Q</tspan><tspan>.</tspan><tspan>IsNotEmpty</tspan><tspan>(</tspan><tspan>)</tspan><tspan>:</tspan></text>
<text blank = "false" id="l_7" x="10" y="10" dx="28" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"><tspan dx = "28">v</tspan><tspan dx="7">=</tspan><tspan dx="7">Q</tspan><tspan>.</tspan><tspan>Top</tspan><tspan>(</tspan><tspan>)</tspan></text>
<text blank = "false" id="l_8" x="10" y="10" dx="28" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"><tspan dx = "28">label</tspan><tspan>[</tspan><tspan>v</tspan><tspan>]</tspan><tspan dx="7">=</tspan><tspan dx="7">step</tspan></text>
<text blank = "false" id="l_9" x="10" y="10" dx="28" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"><tspan dx = "28">step</tspan><tspan dx="7">=</tspan><tspan dx="7">step</tspan><tspan dx="7">+</tspan><tspan dx="7">1</tspan></text>
<text blank = "false" id="l_10" x="10" y="10" dx="28" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"><tspan font-weight="bold" dx="28">for</tspan><tspan dx="7">w</tspan><tspan font-weight="bold" dx="7">in</tspan><tspan dx="7">Neighborhood</tspan><tspan>(</tspan><tspan>v</tspan><tspan>)</tspan><tspan>:</tspan></text>
<text blank = "false" id="l_11" x="10" y="10" dx="56" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"><tspan font-weight="bold" dx="56">if</tspan><tspan font-weight="bold" dx="7">not</tspan><tspan dx="7">pred</tspan><tspan>[</tspan><tspan>w</tspan><tspan>]</tspan><tspan>:</tspan></text>
<text blank = "false" id="l_12" x="10" y="10" dx="84" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"><tspan dx = "84">Q</tspan><tspan>.</tspan><tspan>Append</tspan><tspan>(</tspan><tspan>w</tspan><tspan>)</tspan></text>
<text blank = "false" id="l_13" x="10" y="10" dx="84" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"><tspan dx = "84">pred</tspan><tspan>[</tspan><tspan>w</tspan><tspan>]</tspan><tspan dx="7">=</tspan><tspan dx="7">v</tspan></text>
<text blank = "true" id="l_14" x="10" y="10" dx="84" text-anchor="start" fill="black" font-family="Courier New" font-size="14.0" font-style="normal"></text>

</svg>
